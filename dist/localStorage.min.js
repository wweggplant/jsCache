!function(t,e){"use strict";function r(){return!0}function n(t){return e.querySelectorAll(t)&&Array.prototype.slice.apply(e.querySelectorAll(t))}function o(t){var e,r=[];return t&&(e=new XMLHttpRequest,e.open("get",t,!0),e.send(),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&r.length>0&&r.forEach(function(t){t&&t.call&&t.call(this,e,e.responseText)})}),{xhr:e,done:function(t){t&&r.push(t)}}}function i(e){return this===t?new i(e):void this.init(e)}var a,u={script:"src",link:"href",img:"src"},c={script:"script",link:"style",img:"img"},l="localStorage-";i.prototype.getType=function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()},i.prototype.getInfo=function(){var t=this;return{name:t.name,type:t.type,url:t.url,makup:t.makup}},i.prototype.init=function(t){this.makup=t,this.type=this.getType(t),this.url=t.getAttribute("data-local-url"),this.name=t.getAttribute("data-local-name")},a=function(t){var a,s,p={},f=localStorage,g="storageInfo",m="data-local-name";s={isSupport:function(){return localStorage&&localStorage.setItem},get:function(t){if(s.isSupport())try{return JSON.parse(f.getItem(l+t))}catch(e){return f.getItem(l+t)}},remove:function(t){f.removeItem(t)},set:function(t,e){if(s.isSupport())try{f.removeItem(l+t),f.setItem(l+t,JSON.stringify(e))}catch(t){if(!(t.name.toUpperCase().indexOf("QUOTA")>=0))return void console.error(t.stack);console.error(t.stack)}}},a={require:function(t){var e=new i(t),r=o(e.url);return r.done(function(r,n){var o=e.name;t.setAttribute?t.setAttribute(u[e.type],e.url):t[u[e.type]]=e.url,s.set(o,n),p=a.getAll()||{},p[o]=e.getInfo(),s.set(g,p)}),r},getAll:function(){return s.get(g)},getVersion:function(){return s.get("version")},updateVersion:function(t){s.set("version",t)}};var y=n("["+m+"]");if(!r())return y.forEach(function(t){var e=t.getAttribute(m);t.setAttribtue(m,e),t.removeAttribute(m)}),!1;if(t===a.getVersion()){p=a.getAll();for(var h in p)if(!n(p[h].type+"[data-from-local='"+h+"']").length){var d=p[h].type,v=e.createElement(c[d]),A=s.get(h);v.innerHTML=A,v.setAttribute("data-from-local",h),e.body.appendChild(v)}}else y.forEach(function(t){a.require(t)}),a.updateVersion(t);return a},t.localManager||(t.localManager=a)}(this,document);